(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{91:(e,t,s)=>{Promise.resolve().then(s.bind(s,7961))},401:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(6500).A)("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]])},1913:(e,t,s)=>{"use strict";s.d(t,{dj:()=>m});var a=s(6148);let r=0,l=new Map,d=e=>{if(l.has(e))return;let t=setTimeout(()=>{l.delete(e),o({type:"REMOVE_TOAST",toastId:e})},1e6);l.set(e,t)},n=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:s}=t;return s?d(s):e.toasts.forEach(e=>{d(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===s||void 0===s?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},i=[],c={toasts:[]};function o(e){c=n(c,e),i.forEach(e=>{e(c)})}function x(e){let{...t}=e,s=(r=(r+1)%Number.MAX_SAFE_INTEGER).toString(),a=()=>o({type:"DISMISS_TOAST",toastId:s});return o({type:"ADD_TOAST",toast:{...t,id:s,open:!0,onOpenChange:e=>{e||a()}}}),{id:s,dismiss:a,update:e=>o({type:"UPDATE_TOAST",toast:{...e,id:s}})}}function m(){let[e,t]=a.useState(c);return a.useEffect(()=>(i.push(t),()=>{let e=i.indexOf(t);e>-1&&i.splice(e,1)}),[e]),{...e,toast:x,dismiss:e=>o({type:"DISMISS_TOAST",toastId:e})}}},2592:(e,t,s)=>{"use strict";s.d(t,{BT:()=>c,Wu:()=>o,ZB:()=>i,Zp:()=>d,aR:()=>n,wL:()=>x});var a=s(6536),r=s(6148),l=s(4121);let d=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{ref:t,className:(0,l.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",s),...r})});d.displayName="Card";let n=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{ref:t,className:(0,l.cn)("flex flex-col space-y-1.5 p-6",s),...r})});n.displayName="CardHeader";let i=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{ref:t,className:(0,l.cn)("text-2xl font-semibold leading-none tracking-tight",s),...r})});i.displayName="CardTitle";let c=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{ref:t,className:(0,l.cn)("text-sm text-muted-foreground",s),...r})});c.displayName="CardDescription";let o=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{ref:t,className:(0,l.cn)("p-6 pt-0",s),...r})});o.displayName="CardContent";let x=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{ref:t,className:(0,l.cn)("flex items-center p-6 pt-0",s),...r})});x.displayName="CardFooter"},2788:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(6500).A)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]])},4121:(e,t,s)=>{"use strict";s.d(t,{cn:()=>l});var a=s(8953),r=s(962);function l(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,r.QP)((0,a.$)(t))}},5018:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(6500).A)("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]])},6746:(e,t,s)=>{"use strict";s.d(t,{$:()=>c});var a=s(6536),r=s(6148),l=s(8752),d=s(6941),n=s(4121);let i=(0,d.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),c=r.forwardRef((e,t)=>{let{className:s,variant:r,size:d,asChild:c=!1,...o}=e,x=c?l.DX:"button";return(0,a.jsx)(x,{className:(0,n.cn)(i({variant:r,size:d,className:s})),ref:t,...o})});c.displayName="Button"},7961:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>g});var a=s(6536),r=s(6148),l=s(7469),d=s.n(l),n=s(6746),i=s(2592),c=s(9439),o=s(1913),x=s(401),m=s(2788),h=s(5018),p=s(6500);let u=(0,p.A)("CirclePlus",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]]),f=(0,p.A)("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);function g(){let{toast:e}=(0,o.dj)(),[t,s]=(0,r.useState)([]),[l,p]=(0,r.useState)([]),[g,b]=(0,r.useState)({velocityPeriods:3,workingDaysPerSprint:10,roundToFibonacci:!0}),[j,k]=(0,r.useState)(!0);(0,r.useEffect)(()=>{(async()=>{try{k(!0);let e=await fetch("/api/team");if(!e.ok)throw Error("Failed to fetch team members");let t=await e.json();s(t);let a=await fetch("/api/sprints");if(!a.ok)throw Error("Failed to fetch sprint history");let r=await a.json();p(r);let l=await fetch("/api/settings");if(!l.ok)throw Error("Failed to fetch settings");let d=await l.json();b(d)}catch(t){console.error("Error loading data:",t),e({title:"Error loading data",description:"There was a problem loading your data.",variant:"destructive"})}finally{k(!1)}})()},[e]);let N=t.length>0?(0,c.kA)(t,g.workingDaysPerSprint):100,v=l.length>0?(0,c.NW)(l,N,g):0,y=l.length>0?l[l.length-1]:null,w=y?Number.parseInt(y.sprint.split(" ")[1])+1:1;return j?(0,a.jsx)("div",{className:"flex items-center justify-center h-screen",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-purple-500"})}):(0,a.jsxs)("div",{className:"flex min-h-screen flex-col bg-gradient-to-br from-slate-50 to-slate-100 dark:from-slate-900 dark:to-slate-800",children:[(0,a.jsx)("header",{className:"sticky top-0 z-50 w-full border-b bg-white/80 backdrop-blur supports-[backdrop-filter]:bg-white/60 dark:bg-slate-900/80 dark:border-slate-700",children:(0,a.jsxs)("div",{className:"container flex h-16 items-center",children:[(0,a.jsxs)("div",{className:"mr-4 flex",children:[(0,a.jsxs)(d(),{href:"/",className:"mr-6 flex items-center space-x-2",children:[(0,a.jsx)("div",{className:"bg-purple-600 text-white p-1.5 rounded-md",children:(0,a.jsx)(x.A,{className:"h-5 w-5"})}),(0,a.jsx)("span",{className:"font-bold text-xl hidden sm:inline-block",children:"Sprint Planner"})]}),(0,a.jsxs)("nav",{className:"flex items-center space-x-6 text-sm font-medium",children:[(0,a.jsxs)(d(),{href:"/",className:"text-purple-600 dark:text-purple-400 flex items-center gap-1.5",children:[(0,a.jsx)(x.A,{className:"h-4 w-4"}),(0,a.jsx)("span",{children:"Dashboard"})]}),(0,a.jsxs)(d(),{href:"/team",className:"text-slate-600 hover:text-purple-600 dark:text-slate-300 dark:hover:text-purple-400 transition-colors flex items-center gap-1.5",children:[(0,a.jsx)(m.A,{className:"h-4 w-4"}),(0,a.jsx)("span",{children:"Team"})]}),(0,a.jsxs)(d(),{href:"/history",className:"text-slate-600 hover:text-purple-600 dark:text-slate-300 dark:hover:text-purple-400 transition-colors flex items-center gap-1.5",children:[(0,a.jsx)(h.A,{className:"h-4 w-4"}),(0,a.jsx)("span",{children:"History"})]})]})]}),(0,a.jsx)("div",{className:"ml-auto flex items-center space-x-4",children:(0,a.jsx)(d(),{href:"/settings",className:"text-slate-600 hover:text-purple-600 dark:text-slate-300 dark:hover:text-purple-400 transition-colors text-sm",children:"Settings"})})]})}),(0,a.jsx)("main",{className:"flex-1 container py-8 px-4 md:px-6 lg:px-8",children:(0,a.jsxs)("div",{className:"grid gap-8",children:[(0,a.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-3xl font-bold tracking-tight text-slate-900 dark:text-white",children:"Sprint Planning"}),(0,a.jsx)("p",{className:"text-slate-500 dark:text-slate-400",children:"Calculate your team's capacity for the next sprint."})]}),(0,a.jsx)(d(),{href:"/new-sprint",children:(0,a.jsxs)(n.$,{className:"bg-purple-600 hover:bg-purple-700 text-white",children:[(0,a.jsx)(u,{className:"mr-2 h-4 w-4"}),"New Sprint"]})})]}),(0,a.jsxs)("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:[y?(0,a.jsxs)(i.Zp,{className:"border-slate-200 dark:border-slate-700 shadow-sm hover:shadow-md transition-shadow",children:[(0,a.jsxs)(i.aR,{className:"pb-2 bg-gradient-to-r from-indigo-50 to-purple-50 dark:from-indigo-950/40 dark:to-purple-950/40 rounded-t-lg",children:[(0,a.jsx)(i.ZB,{className:"text-slate-800 dark:text-slate-100",children:"Previous Sprint"}),(0,a.jsxs)(i.BT,{className:"text-slate-600 dark:text-slate-400",children:[y.sprint," (",y.startDate," - ",y.endDate,")"]})]}),(0,a.jsxs)(i.Wu,{className:"pt-6",children:[(0,a.jsxs)("div",{className:"text-3xl font-bold text-slate-900 dark:text-white",children:[y.planned," points"]}),(0,a.jsxs)("p",{className:"text-sm text-slate-500 dark:text-slate-400 mt-1",children:["Completed: ",y.completed," points (",Math.round(y.completed/y.planned*100),"%)"]}),(0,a.jsx)("div",{className:"mt-4 h-3 w-full rounded-full bg-slate-100 dark:bg-slate-700",children:(0,a.jsx)("div",{className:"h-full rounded-full ".concat(y.completed/y.planned>=.9?"bg-green-500":y.completed/y.planned>=.7?"bg-amber-500":"bg-red-500"),style:{width:"".concat(Math.min(100,y.completed/y.planned*100),"%")}})}),(0,a.jsx)("div",{className:"mt-6 flex justify-end",children:(0,a.jsx)(d(),{href:"/history",children:(0,a.jsxs)(n.$,{variant:"ghost",size:"sm",className:"text-purple-600 hover:text-purple-700 hover:bg-purple-50 dark:text-purple-400 dark:hover:bg-purple-950/50",children:["View History",(0,a.jsx)(f,{className:"ml-1 h-4 w-4"})]})})})]})]}):(0,a.jsxs)(i.Zp,{className:"border-slate-200 dark:border-slate-700 shadow-sm hover:shadow-md transition-shadow",children:[(0,a.jsxs)(i.aR,{className:"pb-2 bg-gradient-to-r from-indigo-50 to-purple-50 dark:from-indigo-950/40 dark:to-purple-950/40 rounded-t-lg",children:[(0,a.jsx)(i.ZB,{className:"text-slate-800 dark:text-slate-100",children:"Previous Sprint"}),(0,a.jsx)(i.BT,{className:"text-slate-600 dark:text-slate-400",children:"No previous sprint data"})]}),(0,a.jsxs)(i.Wu,{className:"pt-6",children:[(0,a.jsx)("div",{className:"text-3xl font-bold text-slate-500 dark:text-slate-400",children:"No data"}),(0,a.jsx)("p",{className:"text-sm text-slate-500 dark:text-slate-400 mt-1",children:"Add your first sprint to get started"}),(0,a.jsx)("div",{className:"mt-6 flex justify-end",children:(0,a.jsx)(d(),{href:"/new-sprint",children:(0,a.jsxs)(n.$,{variant:"ghost",size:"sm",className:"text-purple-600 hover:text-purple-700 hover:bg-purple-50 dark:text-purple-400 dark:hover:bg-purple-950/50",children:["Create Sprint",(0,a.jsx)(f,{className:"ml-1 h-4 w-4"})]})})})]})]}),(0,a.jsxs)(i.Zp,{className:"border-slate-200 dark:border-slate-700 shadow-sm hover:shadow-md transition-shadow",children:[(0,a.jsxs)(i.aR,{className:"pb-2 bg-gradient-to-r from-blue-50 to-cyan-50 dark:from-blue-950/40 dark:to-cyan-950/40 rounded-t-lg",children:[(0,a.jsx)(i.ZB,{className:"text-slate-800 dark:text-slate-100",children:"Team Capacity"}),(0,a.jsxs)(i.BT,{className:"text-slate-600 dark:text-slate-400",children:["Sprint ",w]})]}),(0,a.jsxs)(i.Wu,{className:"pt-6",children:[(0,a.jsxs)("div",{className:"text-3xl font-bold text-slate-900 dark:text-white",children:[Math.round(N),"%"]}),(0,a.jsxs)("p",{className:"text-sm text-slate-500 dark:text-slate-400 mt-1",children:[t.filter(e=>e.daysOff>0).length," team member(s) with planned time off"]}),(0,a.jsx)("div",{className:"mt-4 grid grid-cols-10 gap-1",children:[...Array(10)].map((e,t)=>(0,a.jsx)("div",{className:"h-3 rounded-full ".concat(t<Math.round(N/10)?"bg-blue-500":"bg-slate-100 dark:bg-slate-700")},t))}),(0,a.jsx)("div",{className:"mt-6 flex justify-end",children:(0,a.jsx)(d(),{href:"/team",children:(0,a.jsxs)(n.$,{variant:"ghost",size:"sm",className:"text-blue-600 hover:text-blue-700 hover:bg-blue-50 dark:text-blue-400 dark:hover:bg-blue-950/50",children:["Manage Team",(0,a.jsx)(f,{className:"ml-1 h-4 w-4"})]})})})]})]}),(0,a.jsxs)(i.Zp,{className:"border-slate-200 dark:border-slate-700 shadow-sm hover:shadow-md transition-shadow",children:[(0,a.jsxs)(i.aR,{className:"pb-2 bg-gradient-to-r from-emerald-50 to-teal-50 dark:from-emerald-950/40 dark:to-teal-950/40 rounded-t-lg",children:[(0,a.jsx)(i.ZB,{className:"text-slate-800 dark:text-slate-100",children:"Recommended Points"}),(0,a.jsx)(i.BT,{className:"text-slate-600 dark:text-slate-400",children:"Based on capacity and velocity"})]}),(0,a.jsxs)(i.Wu,{className:"pt-6",children:[(0,a.jsxs)("div",{className:"text-3xl font-bold text-slate-900 dark:text-white",children:[v," points"]}),y?(0,a.jsxs)("p",{className:"text-sm text-slate-500 dark:text-slate-400 mt-1",children:["Adjusted from previous ",y.completed," points (",Math.round(N),"% capacity)"]}):(0,a.jsx)("p",{className:"text-sm text-slate-500 dark:text-slate-400 mt-1",children:"Add sprint history to improve this calculation"}),(0,a.jsx)("div",{className:"mt-6 flex justify-end",children:(0,a.jsx)(d(),{href:"/settings",children:(0,a.jsxs)(n.$,{variant:"ghost",size:"sm",className:"text-emerald-600 hover:text-emerald-700 hover:bg-emerald-50 dark:text-emerald-400 dark:hover:bg-emerald-950/50",children:["Adjust Calculation",(0,a.jsx)(f,{className:"ml-1 h-4 w-4"})]})})})]})]})]}),(0,a.jsxs)(i.Zp,{className:"mt-6 border-slate-200 dark:border-slate-700 shadow-sm",children:[(0,a.jsxs)(i.aR,{className:"bg-gradient-to-r from-slate-50 to-slate-100 dark:from-slate-800/50 dark:to-slate-800/30 rounded-t-lg",children:[(0,a.jsx)(i.ZB,{className:"text-slate-800 dark:text-slate-100",children:"Team Member Availability"}),(0,a.jsxs)(i.BT,{className:"text-slate-600 dark:text-slate-400",children:["Days off and capacity for Sprint ",w]})]}),(0,a.jsx)(i.Wu,{className:"pt-6",children:t.length>0?(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"w-full",children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{className:"border-b border-slate-200 dark:border-slate-700",children:[(0,a.jsx)("th",{className:"text-left font-medium p-2 text-slate-600 dark:text-slate-400",children:"Team Member"}),(0,a.jsx)("th",{className:"text-center font-medium p-2 text-slate-600 dark:text-slate-400",children:"Role"}),(0,a.jsx)("th",{className:"text-center font-medium p-2 text-slate-600 dark:text-slate-400",children:"Available Days"}),(0,a.jsx)("th",{className:"text-center font-medium p-2 text-slate-600 dark:text-slate-400",children:"Days Off"}),(0,a.jsx)("th",{className:"text-center font-medium p-2 text-slate-600 dark:text-slate-400",children:"Capacity %"})]})}),(0,a.jsx)("tbody",{children:t.map((e,t)=>(0,a.jsxs)("tr",{className:"border-b border-slate-100 dark:border-slate-800 hover:bg-slate-50 dark:hover:bg-slate-800/50 transition-colors",children:[(0,a.jsx)("td",{className:"p-3 text-slate-900 dark:text-slate-200 font-medium",children:e.name}),(0,a.jsx)("td",{className:"text-center p-3 text-slate-700 dark:text-slate-300",children:e.role}),(0,a.jsx)("td",{className:"text-center p-3 text-slate-700 dark:text-slate-300",children:g.workingDaysPerSprint-e.daysOff}),(0,a.jsx)("td",{className:"text-center p-3",children:(0,a.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-medium ".concat(e.daysOff>0?"bg-amber-100 text-amber-800 dark:bg-amber-900/30 dark:text-amber-300":"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300"),children:e.daysOff})}),(0,a.jsx)("td",{className:"text-center p-3",children:(0,a.jsxs)("span",{className:"px-2 py-1 rounded-full text-xs font-medium ".concat(e.capacity<.8?"bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-300":"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300"),children:[Math.round(100*e.capacity),"%"]})})]},t))})]})}):(0,a.jsxs)("div",{className:"text-center py-12 bg-slate-50 dark:bg-slate-800/20 rounded-lg border border-dashed border-slate-200 dark:border-slate-700",children:[(0,a.jsx)(m.A,{className:"h-12 w-12 text-slate-300 dark:text-slate-600 mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-slate-500 dark:text-slate-400 mb-4",children:"No team members added yet"}),(0,a.jsx)(d(),{href:"/team",children:(0,a.jsxs)(n.$,{className:"bg-purple-600 hover:bg-purple-700 text-white",children:[(0,a.jsx)(m.A,{className:"mr-2 h-4 w-4"}),"Add Team Members"]})})]})})]})]})}),(0,a.jsx)("footer",{className:"border-t border-slate-200 dark:border-slate-800 py-6 text-center text-sm text-slate-500 dark:text-slate-400",children:(0,a.jsxs)("div",{className:"container",children:["Sprint Planner \xa9 ",new Date().getFullYear()," - A lightweight sprint planning tool"]})})]})}},9439:(e,t,s)=>{"use strict";function a(e,t){if(0===e.length)return 100;let s=e.reduce((e,s)=>e+t*s.capacity,0);return e.reduce((e,s)=>e+Math.max(0,(t-s.daysOff)*s.capacity),0)/s*100}function r(e,t,s){let a=function(e,t){if(0===e.length)return 0;let s=e.slice(-Math.min(t,e.length));return s.reduce((e,t)=>e+t.completed,0)/s.length}(e,s.velocityPeriods);if(0===a)return 8;let r=t/100*a;return s.roundToFibonacci?function(e){let t=[1,2,3,5,8,13,21,34,55],s=t[0],a=Math.abs(e-s);for(let r of t){let t=Math.abs(e-r);t<a&&(a=t,s=r)}return s}(r):Math.round(r)}s.d(t,{NW:()=>r,kA:()=>a})}},e=>{var t=t=>e(e.s=t);e.O(0,[458,264,11,358],()=>t(91)),_N_E=e.O()}]);